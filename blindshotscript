local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer


local flyEnabled = false
local espEnabled = false
local hitboxEnabled = false
local noclipEnabled = false
local hitboxSize = 5
local maximized = false


local gui = Instance.new("ScreenGui", player.PlayerGui)
gui.Name = "FakeCheatClient"
gui.ResetOnSpawn = false

local main = Instance.new("Frame", gui)
main.Size = UDim2.fromScale(0.28,0.42)
main.Position = UDim2.fromScale(0.36,0.28)
main.BackgroundColor3 = Color3.fromRGB(25,25,28)
main.BackgroundTransparency = 0.15
Instance.new("UICorner", main).CornerRadius = UDim.new(0,14)

-- Top bar
local top = Instance.new("Frame", main)
top.Size = UDim2.fromScale(1,0.12)
top.BackgroundColor3 = Color3.fromRGB(40,40,45)
top.BackgroundTransparency = 0.1
Instance.new("UICorner", top).CornerRadius = UDim.new(0,14)

local function macDot(color,x)
    local b = Instance.new("TextButton", top)
    b.Size = UDim2.fromScale(0.04,0.45)
    b.Position = UDim2.fromScale(x,0.3)
    b.BackgroundColor3 = color
    b.Text = ""
    Instance.new("UICorner", b).CornerRadius = UDim.new(1,0)
    return b
end

local closeBtn = macDot(Color3.fromRGB(255,95,86),0.04)
local minBtn   = macDot(Color3.fromRGB(255,189,46),0.1)
local maxBtn   = macDot(Color3.fromRGB(39,201,63),0.16)

-- Content
local content = Instance.new("Frame", main)
content.Position = UDim2.fromScale(0,0.14)
content.Size = UDim2.fromScale(1,0.7)
content.BackgroundTransparency = 1

-- Bottom bar
local bottom = Instance.new("Frame", main)
bottom.Position = UDim2.fromScale(0,0.85)
bottom.Size = UDim2.fromScale(1,0.15)
bottom.BackgroundColor3 = Color3.fromRGB(35,35,38)
bottom.BackgroundTransparency = 0.1
Instance.new("UICorner", bottom).CornerRadius = UDim.new(0,14)

local avatar = Instance.new("ImageLabel", bottom)
avatar.Size = UDim2.fromScale(0.13,0.7)
avatar.Position = UDim2.fromScale(0.03,0.15)
avatar.BackgroundTransparency = 1
avatar.Image = "rbxthumb://type=AvatarHeadShot&id="..player.UserId.."&w=150&h=150"

local nick = Instance.new("TextLabel", bottom)
nick.Position = UDim2.fromScale(0.2,0.2)
nick.Size = UDim2.fromScale(0.6,0.6)
nick.BackgroundTransparency = 1
nick.Text = player.Name
nick.TextScaled = true
nick.Font = Enum.Font.GothamMedium
nick.TextColor3 = Color3.fromRGB(230,230,230)


local function createButton(text,y)
    local b = Instance.new("TextButton", content)
    b.Size = UDim2.fromScale(0.85,0.12)
    b.Position = UDim2.fromScale(0.075,y)
    b.Text = text
    b.TextScaled = true
    b.Font = Enum.Font.Gotham
    b.BackgroundColor3 = Color3.fromRGB(60,60,65)
    b.TextColor3 = Color3.new(1,1,1)
    b.BackgroundTransparency = 0.1
    Instance.new("UICorner", b).CornerRadius = UDim.new(0,10)
    return b
end

local espBtn    = createButton("ESP Invisible: OFF",0.05)
local flyBtn    = createButton("Fly (F): OFF",0.18)
local hitboxBtn = createButton("Hitbox Expander: OFF",0.31)
local noclipBtn = createButton("Noclip: OFF",0.44)


local sliderFrame = Instance.new("Frame", content)
sliderFrame.Size = UDim2.fromScale(0.85,0.12)
sliderFrame.Position = UDim2.fromScale(0.075,0.58)
sliderFrame.BackgroundColor3 = Color3.fromRGB(60,60,65)
sliderFrame.BackgroundTransparency = 0.1
Instance.new("UICorner", sliderFrame).CornerRadius = UDim.new(0,10)

local sliderLabel = Instance.new("TextLabel", sliderFrame)
sliderLabel.Size = UDim2.fromScale(1,0.5)
sliderLabel.BackgroundTransparency = 1
sliderLabel.Text = "Hitbox size: 5"
sliderLabel.TextScaled = true
sliderLabel.TextColor3 = Color3.new(1,1,1)
sliderLabel.Font = Enum.Font.Gotham

local slider = Instance.new("Frame", sliderFrame)
slider.Position = UDim2.fromScale(0.05,0.65)
slider.Size = UDim2.fromScale(0.9,0.15)
slider.BackgroundColor3 = Color3.fromRGB(90,90,95)
Instance.new("UICorner", slider).CornerRadius = UDim.new(1,0)

local knob = Instance.new("Frame", slider)
knob.Size = UDim2.fromScale(0.05,2)
knob.Position = UDim2.fromScale(0,-0.5)
knob.BackgroundColor3 = Color3.fromRGB(220,220,220)
Instance.new("UICorner", knob).CornerRadius = UDim.new(1,0)


local function applyHitbox()
    for _,plr in pairs(Players:GetPlayers()) do
        if plr ~= player and plr.Character then
            local hrp = plr.Character:FindFirstChild("HumanoidRootPart")
            if hrp then
                if hitboxEnabled then
                    hrp.Size = Vector3.new(hitboxSize,hitboxSize,hitboxSize)
                    hrp.Transparency = 0.5
                    hrp.Material = Enum.Material.Neon
                    hrp.CanCollide = false
                else
                    hrp.Size = Vector3.new(2,2,1)
                    hrp.Transparency = 1
                    hrp.Material = Enum.Material.Plastic
                end
            end
        end
    end
end

local function setESP(state)
    espEnabled = state
    espBtn.Text = "ESP Invisible: "..(state and "ON" or "OFF")

    for _,plr in pairs(Players:GetPlayers()) do
        if plr.Character then
            local old = plr.Character:FindFirstChild("Highlight")
            if old then old:Destroy() end

            if state and plr ~= player then
                local h = Instance.new("Highlight")
                h.FillColor = Color3.fromRGB(0,255,0)
                h.OutlineColor = Color3.new(1,1,1)
                h.Parent = plr.Character
            end
        end
    end
end


espBtn.MouseButton1Click:Connect(function()
    setESP(not espEnabled)
end)

hitboxBtn.MouseButton1Click:Connect(function()
    hitboxEnabled = not hitboxEnabled
    hitboxBtn.Text = "Hitbox Expander: "..(hitboxEnabled and "ON" or "OFF")
    applyHitbox()
end)

noclipBtn.MouseButton1Click:Connect(function()
    noclipEnabled = not noclipEnabled
    noclipBtn.Text = "Noclip: "..(noclipEnabled and "ON" or "OFF")
end)


local dragging = false

knob.InputBegan:Connect(function(i)
    if i.UserInputType == Enum.UserInputType.MouseButton1 then dragging = true end
end)

UIS.InputEnded:Connect(function(i)
    if i.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end
end)

UIS.InputChanged:Connect(function(i)
    if dragging and i.UserInputType == Enum.UserInputType.MouseMovement then
        local rel = math.clamp((i.Position.X - slider.AbsolutePosition.X)/slider.AbsoluteSize.X,0,1)
        knob.Position = UDim2.fromScale(rel,-0.5)
        hitboxSize = math.floor(2 + rel*18)
        sliderLabel.Text = "Hitbox size: "..hitboxSize
        if hitboxEnabled then applyHitbox() end
    end
end)


local bv,bg
local move = {W=false,A=false,S=false,D=false,Up=false,Down=false}

local function startFly()
    local char = player.Character
    if not char then return end
    local hrp = char:WaitForChild("HumanoidRootPart")
    local hum = char:FindFirstChildOfClass("Humanoid")
    if hum then hum.AutoRotate = false end

    bv = Instance.new("BodyVelocity", hrp)
    bv.MaxForce = Vector3.new(1e9,1e9,1e9)

    bg = Instance.new("BodyGyro", hrp)
    bg.MaxTorque = Vector3.new(1e9,1e9,1e9)
end

local function stopFly()
    local char = player.Character
    if char then
        local hum = char:FindFirstChildOfClass("Humanoid")
        if hum then hum.AutoRotate = true end
    end
    if bv then bv:Destroy() bv=nil end
    if bg then bg:Destroy() bg=nil end
end

local function toggleFly()
    flyEnabled = not flyEnabled
    flyBtn.Text = "Fly (F): "..(flyEnabled and "ON" or "OFF")
    if flyEnabled then startFly() else stopFly() end
end

flyBtn.MouseButton1Click:Connect(toggleFly)


UIS.InputBegan:Connect(function(i,gp)
    if gp then return end
    if i.KeyCode == Enum.KeyCode.F then toggleFly()
    elseif i.KeyCode == Enum.KeyCode.W then move.W=true
    elseif i.KeyCode == Enum.KeyCode.A then move.A=true
    elseif i.KeyCode == Enum.KeyCode.S then move.S=true
    elseif i.KeyCode == Enum.KeyCode.D then move.D=true
    elseif i.KeyCode == Enum.KeyCode.Space then move.Up=true
    elseif i.KeyCode == Enum.KeyCode.LeftControl then move.Down=true
    elseif i.KeyCode == Enum.KeyCode.RightShift then main.Visible = not main.Visible end
end)

UIS.InputEnded:Connect(function(i)
    if i.KeyCode == Enum.KeyCode.W then move.W=false
    elseif i.KeyCode == Enum.KeyCode.A then move.A=false
    elseif i.KeyCode == Enum.KeyCode.S then move.S=false
    elseif i.KeyCode == Enum.KeyCode.D then move.D=false
    elseif i.KeyCode == Enum.KeyCode.Space then move.Up=false
    elseif i.KeyCode == Enum.KeyCode.LeftControl then move.Down=false end
end)


RunService.RenderStepped:Connect(function()
    if flyEnabled and bv and bg then
        local cam = workspace.CurrentCamera
        local dir = Vector3.zero

        if move.W then dir += cam.CFrame.LookVector end
        if move.S then dir -= cam.CFrame.LookVector end
        if move.A then dir -= cam.CFrame.RightVector end
        if move.D then dir += cam.CFrame.RightVector end
        if move.Up then dir += cam.CFrame.UpVector end
        if move.Down then dir -= cam.CFrame.UpVector end

        if dir.Magnitude > 0 then dir = dir.Unit * 70 end
        bv.Velocity = dir
        bg.CFrame = CFrame.new(bg.Parent.Position, bg.Parent.Position + cam.CFrame.LookVector)
    end

    if noclipEnabled and player.Character then
        for _,p in pairs(player.Character:GetDescendants()) do
            if p:IsA("BasePart") then p.CanCollide = false end
        end
    end
end)


local function showConfirm(callback)
    local frame = Instance.new("Frame", gui)
    frame.Size = UDim2.fromScale(0.35,0.22)
    frame.Position = UDim2.fromScale(0.325,0.39)
    frame.BackgroundColor3 = Color3.fromRGB(35,35,40)
    frame.BackgroundTransparency = 0.05
    Instance.new("UICorner", frame).CornerRadius = UDim.new(0,14)

    local txt = Instance.new("TextLabel", frame)
    txt.Size = UDim2.fromScale(0.9,0.5)
    txt.Position = UDim2.fromScale(0.05,0.1)
    txt.BackgroundTransparency = 1
    txt.TextWrapped = true
    txt.TextScaled = true
    txt.TextColor3 = Color3.new(1,1,1)
    txt.Font = Enum.Font.GothamMedium
    txt.Text = "Are you sure you want to disable the GUI?\nThis will also turn off all cheats."

    local yes = Instance.new("TextButton", frame)
    yes.Size = UDim2.fromScale(0.4,0.25)
    yes.Position = UDim2.fromScale(0.05,0.65)
    yes.Text = "Yes"
    yes.BackgroundColor3 = Color3.fromRGB(200,60,60)
    yes.TextScaled = true
    Instance.new("UICorner", yes)

    local no = Instance.new("TextButton", frame)
    no.Size = UDim2.fromScale(0.4,0.25)
    no.Position = UDim2.fromScale(0.55,0.65)
    no.Text = "No"
    no.BackgroundColor3 = Color3.fromRGB(80,80,90)
    no.TextScaled = true
    Instance.new("UICorner", no)

    yes.MouseButton1Click:Connect(function()
        frame:Destroy()
        callback(true)
    end)

    no.MouseButton1Click:Connect(function()
        frame:Destroy()
    end)
end


closeBtn.MouseButton1Click:Connect(function()
    showConfirm(function(ok)
        if ok then
            flyEnabled = false
            stopFly()
            setESP(false)
            hitboxEnabled = false
            noclipEnabled = false
            gui:Destroy()
        end
    end)
end)

minBtn.MouseButton1Click:Connect(function()
    main.Visible = false
end)

maxBtn.MouseButton1Click:Connect(function()
    if not maximized then
        main.Size = UDim2.fromScale(0.5,0.6)
        main.Position = UDim2.fromScale(0.25,0.2)
    else
        main.Size = UDim2.fromScale(0.28,0.42)
        main.Position = UDim2.fromScale(0.36,0.28)
    end
    maximized = not maximized
end)

print("blind shot script loaded")
